"use strict";(self.webpackChunkfilebridge_docs=self.webpackChunkfilebridge_docs||[]).push([[317],{139(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"API-Reference","title":"API Reference","description":"All API routes are under /api/ and require authentication unless noted. Authentication is validated via the NextAuth session cookie.","source":"@site/../docs/API-Reference.md","sourceDirName":".","slug":"/API-Reference","permalink":"/FileBridge/docs/API-Reference","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Structured Logging","permalink":"/FileBridge/docs/Structured-Logging"},"next":{"title":"Architecture","permalink":"/FileBridge/docs/Architecture"}}');var r=s(4848),d=s(8453);const c={},t="API Reference",l={},o=[{value:"Connections",id:"connections",level:2},{value:"<code>GET /api/connections</code>",id:"get-apiconnections",level:3},{value:"<code>POST /api/connections</code>",id:"post-apiconnections",level:3},{value:"<code>GET /api/connections/[id]</code>",id:"get-apiconnectionsid",level:3},{value:"<code>PUT /api/connections/[id]</code>",id:"put-apiconnectionsid",level:3},{value:"<code>DELETE /api/connections/[id]</code>",id:"delete-apiconnectionsid",level:3},{value:"<code>POST /api/connections/[id]/test</code>",id:"post-apiconnectionsidtest",level:3},{value:"<code>POST /api/connections/test</code>",id:"post-apiconnectionstest",level:3},{value:"<code>GET /api/connections/[id]/browse?path=/some/path</code>",id:"get-apiconnectionsidbrowsepathsomepath",level:3},{value:"Jobs",id:"jobs",level:2},{value:"<code>GET /api/jobs</code>",id:"get-apijobs",level:3},{value:"<code>POST /api/jobs</code>",id:"post-apijobs",level:3},{value:"<code>GET /api/jobs/[id]</code>",id:"get-apijobsid",level:3},{value:"<code>PUT /api/jobs/[id]</code>",id:"put-apijobsid",level:3},{value:"<code>DELETE /api/jobs/[id]</code>",id:"delete-apijobsid",level:3},{value:"<code>POST /api/jobs/[id]/run</code>",id:"post-apijobsidrun",level:3},{value:"<code>GET /api/jobs/[id]/runs</code>",id:"get-apijobsidruns",level:3},{value:"Transfer Logs",id:"transfer-logs",level:2},{value:"<code>GET /api/logs</code>",id:"get-apilogs",level:3},{value:"Dashboard",id:"dashboard",level:2},{value:"<code>GET /api/dashboard/stats</code>",id:"get-apidashboardstats",level:3},{value:"Settings",id:"settings",level:2},{value:"<code>GET /api/settings</code>",id:"get-apisettings",level:3},{value:"<code>PUT /api/settings</code>",id:"put-apisettings",level:3},{value:"Audit Logs",id:"audit-logs",level:2},{value:"<code>GET /api/audit-logs</code>",id:"get-apiaudit-logs",level:3},{value:"Backup",id:"backup",level:2},{value:"<code>GET /api/backup/list</code>",id:"get-apibackuplist",level:3},{value:"<code>POST /api/backup/run</code>",id:"post-apibackuprun",level:3},{value:"<code>POST /api/backup/restore</code>",id:"post-apibackuprestore",level:3},{value:"Health Check",id:"health-check",level:2},{value:"<code>GET /api/health</code>",id:"get-apihealth",level:3},{value:"Error Responses",id:"error-responses",level:2}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"api-reference",children:"API Reference"})}),"\n",(0,r.jsxs)(n.p,{children:["All API routes are under ",(0,r.jsx)(n.code,{children:"/api/"})," and require authentication unless noted. Authentication is validated via the NextAuth session cookie."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"connections",children:"Connections"}),"\n",(0,r.jsx)(n.h3,{id:"get-apiconnections",children:(0,r.jsx)(n.code,{children:"GET /api/connections"})}),"\n",(0,r.jsxs)(n.p,{children:["Returns all saved connections. The ",(0,r.jsx)(n.code,{children:"credentials"})," field is ",(0,r.jsx)(n.strong,{children:"never"})," returned \u2014 only ",(0,r.jsx)(n.code,{children:"username"})," is included for display."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "id": 1,\n    "name": "Production SFTP",\n    "protocol": "sftp",\n    "host": "sftp.example.com",\n    "port": 22,\n    "username": "transfer_user",\n    "createdAt": "2026-01-15T09:00:00.000Z",\n    "updatedAt": "2026-01-15T09:00:00.000Z"\n  }\n]\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"post-apiconnections",children:(0,r.jsx)(n.code,{children:"POST /api/connections"})}),"\n",(0,r.jsx)(n.p,{children:"Creates a new connection."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request Body"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "My SFTP Server",\n  "protocol": "sftp",\n  "host": "sftp.example.com",\n  "port": 22,\n  "credentials": {\n    "username": "alice",\n    "password": "secret"\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Response"}),": Created connection (without credentials)."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"get-apiconnectionsid",children:(0,r.jsx)(n.code,{children:"GET /api/connections/[id]"})}),"\n",(0,r.jsxs)(n.p,{children:["Returns a single connection ",(0,r.jsx)(n.strong,{children:"including"})," credentials. Used by the edit form. Requires authentication."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"put-apiconnectionsid",children:(0,r.jsx)(n.code,{children:"PUT /api/connections/[id]"})}),"\n",(0,r.jsxs)(n.p,{children:["Updates an existing connection. Accepts the same body as ",(0,r.jsx)(n.code,{children:"POST /api/connections"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"delete-apiconnectionsid",children:(0,r.jsx)(n.code,{children:"DELETE /api/connections/[id]"})}),"\n",(0,r.jsxs)(n.p,{children:["Deletes a connection. Returns ",(0,r.jsx)(n.code,{children:"409 Conflict"})," if any job references this connection."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"post-apiconnectionsidtest",children:(0,r.jsx)(n.code,{children:"POST /api/connections/[id]/test"})}),"\n",(0,r.jsx)(n.p,{children:"Tests a saved connection's reachability and authentication."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{ "success": true, "message": "Connected successfully" }\n// or\n{ "success": false, "message": "Connection refused: ECONNREFUSED" }\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"post-apiconnectionstest",children:(0,r.jsx)(n.code,{children:"POST /api/connections/test"})}),"\n",(0,r.jsxs)(n.p,{children:["Tests connection values from a form (unsaved). Accepts the same body as ",(0,r.jsx)(n.code,{children:"POST /api/connections"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"get-apiconnectionsidbrowsepathsomepath",children:(0,r.jsx)(n.code,{children:"GET /api/connections/[id]/browse?path=/some/path"})}),"\n",(0,r.jsx)(n.p,{children:"Lists the contents of a remote directory for the file browser UI."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Query Parameters"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"path"})," (string) \u2014 the remote path to list"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'[\n  { "name": "incoming", "isDirectory": true, "size": 0, "modifiedAt": "..." },\n  { "name": "report.csv", "isDirectory": false, "size": 4096, "modifiedAt": "..." }\n]\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"jobs",children:"Jobs"}),"\n",(0,r.jsx)(n.h3,{id:"get-apijobs",children:(0,r.jsx)(n.code,{children:"GET /api/jobs"})}),"\n",(0,r.jsx)(n.p,{children:"Returns all jobs with their current status."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"post-apijobs",children:(0,r.jsx)(n.code,{children:"POST /api/jobs"})}),"\n",(0,r.jsx)(n.p,{children:"Creates a new job."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request Body"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Daily Report Transfer",\n  "sourceConnectionId": 1,\n  "sourcePath": "/data/reports",\n  "destinationConnectionId": 2,\n  "destinationPath": "/archive/reports",\n  "fileFilter": "*.csv",\n  "schedule": "0 6 * * *",\n  "postTransferAction": "move",\n  "movePath": "/data/processed",\n  "overwriteExisting": false,\n  "skipHiddenFiles": true,\n  "extractArchives": false,\n  "deltaSync": false,\n  "status": "active"\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"get-apijobsid",children:(0,r.jsx)(n.code,{children:"GET /api/jobs/[id]"})}),"\n",(0,r.jsx)(n.p,{children:"Returns a single job."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"put-apijobsid",children:(0,r.jsx)(n.code,{children:"PUT /api/jobs/[id]"})}),"\n",(0,r.jsxs)(n.p,{children:["Updates a job. Accepts the same body as ",(0,r.jsx)(n.code,{children:"POST /api/jobs"}),". When ",(0,r.jsx)(n.code,{children:"status"})," changes to ",(0,r.jsx)(n.code,{children:"active"}),", the scheduler automatically registers the new cron schedule."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"delete-apijobsid",children:(0,r.jsx)(n.code,{children:"DELETE /api/jobs/[id]"})}),"\n",(0,r.jsxs)(n.p,{children:["Deletes a job and all associated ",(0,r.jsx)(n.code,{children:"job_runs"})," and ",(0,r.jsx)(n.code,{children:"transfer_logs"})," records."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"post-apijobsidrun",children:(0,r.jsx)(n.code,{children:"POST /api/jobs/[id]/run"})}),"\n",(0,r.jsx)(n.p,{children:"Triggers an immediate execution of the job."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request Body"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{ "dryRun": false }\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"dryRun: false"})," \u2014 Runs the job for real (returns ",(0,r.jsx)(n.code,{children:"{ success: true }"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"dryRun: true"})," \u2014 Returns a dry run preview (returns ",(0,r.jsx)(n.code,{children:"DryRunResult"})," \u2014 see ",(0,r.jsx)(n.a,{href:"Transfer-Engine#dry-run",children:"Transfer Engine"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"get-apijobsidruns",children:(0,r.jsx)(n.code,{children:"GET /api/jobs/[id]/runs"})}),"\n",(0,r.jsx)(n.p,{children:"Returns the run history for a job (most recent first)."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "id": 42,\n    "jobId": 7,\n    "startedAt": "2026-02-22T06:00:00.000Z",\n    "completedAt": "2026-02-22T06:00:03.421Z",\n    "status": "success",\n    "filesTransferred": 12,\n    "bytesTransferred": 524288,\n    "totalFiles": 12,\n    "currentFile": null,\n    "errorMessage": null\n  }\n]\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"transfer-logs",children:"Transfer Logs"}),"\n",(0,r.jsx)(n.h3,{id:"get-apilogs",children:(0,r.jsx)(n.code,{children:"GET /api/logs"})}),"\n",(0,r.jsx)(n.p,{children:"Returns paginated transfer log entries with optional filters."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Query Parameters"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"page"})}),(0,r.jsx)(n.td,{children:"number"}),(0,r.jsx)(n.td,{children:"Page number (1-based, default: 1)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"limit"})}),(0,r.jsx)(n.td,{children:"number"}),(0,r.jsx)(n.td,{children:"Results per page (default: 50)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"jobId"})}),(0,r.jsx)(n.td,{children:"number"}),(0,r.jsx)(n.td,{children:"Filter by job ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"status"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"success"})," | ",(0,r.jsx)(n.code,{children:"failure"})]}),(0,r.jsx)(n.td,{children:"Filter by transfer status"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"search"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Filter by filename (partial match)"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "logs": [\n    {\n      "id": 1001,\n      "jobId": 7,\n      "jobRunId": 42,\n      "fileName": "report_2026-02-22.csv",\n      "sourcePath": "/data/reports/report_2026-02-22.csv",\n      "destinationPath": "/archive/reports/report_2026-02-22.csv",\n      "fileSize": 43520,\n      "transferredAt": "2026-02-22T06:00:01.234Z",\n      "status": "success",\n      "errorMessage": null\n    }\n  ],\n  "total": 1,\n  "page": 1,\n  "limit": 50\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"dashboard",children:"Dashboard"}),"\n",(0,r.jsx)(n.h3,{id:"get-apidashboardstats",children:(0,r.jsx)(n.code,{children:"GET /api/dashboard/stats"})}),"\n",(0,r.jsx)(n.p,{children:"Returns KPI data and chart data for the dashboard."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "kpis": {\n    "files24h": 47,\n    "files7d": 312,\n    "filesAllTime": 5841,\n    "bytes24h": 2097152,\n    "successRate": 98.7,\n    "activeJobs": 6\n  },\n  "chart": [\n    { "date": "2026-02-16", "files": 41, "bytes": 1048576 },\n    ...\n  ],\n  "recentActivity": [...],\n  "jobStatuses": [...]\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"settings",children:"Settings"}),"\n",(0,r.jsx)(n.h3,{id:"get-apisettings",children:(0,r.jsx)(n.code,{children:"GET /api/settings"})}),"\n",(0,r.jsx)(n.p,{children:"Returns the current notification settings."}),"\n",(0,r.jsx)(n.h3,{id:"put-apisettings",children:(0,r.jsx)(n.code,{children:"PUT /api/settings"})}),"\n",(0,r.jsx)(n.p,{children:"Updates notification settings."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request Body"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "notifications": {\n    "emailEnabled": true,\n    "smtpHost": "smtp.example.com",\n    "smtpPort": 587,\n    "smtpUser": "alerts@example.com",\n    "smtpPassword": "...",\n    "smtpFrom": "FileBridge <alerts@example.com>",\n    "smtpTo": "ops-team@example.com",\n    "teamsWebhookUrl": "https://outlook.office.com/webhook/...",\n    "teamsEnabled": false,\n    "alertOnFailure": true,\n    "alertAfterConsecutiveErrors": 3\n  }\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"audit-logs",children:"Audit Logs"}),"\n",(0,r.jsx)(n.h3,{id:"get-apiaudit-logs",children:(0,r.jsx)(n.code,{children:"GET /api/audit-logs"})}),"\n",(0,r.jsx)(n.p,{children:"Returns paginated audit log entries."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Query Parameters"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"page"})}),(0,r.jsx)(n.td,{children:"number"}),(0,r.jsx)(n.td,{children:"Page number (1-based, default: 1)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"limit"})}),(0,r.jsx)(n.td,{children:"number"}),(0,r.jsx)(n.td,{children:"Results per page (default: 50)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"userId"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Filter by user email"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"action"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsxs)(n.td,{children:["Filter by action: ",(0,r.jsx)(n.code,{children:"create"}),", ",(0,r.jsx)(n.code,{children:"update"}),", ",(0,r.jsx)(n.code,{children:"delete"}),", ",(0,r.jsx)(n.code,{children:"execute"}),", ",(0,r.jsx)(n.code,{children:"login"}),", ",(0,r.jsx)(n.code,{children:"settings_change"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"resource"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsxs)(n.td,{children:["Filter by resource: ",(0,r.jsx)(n.code,{children:"connection"}),", ",(0,r.jsx)(n.code,{children:"job"}),", ",(0,r.jsx)(n.code,{children:"settings"}),", ",(0,r.jsx)(n.code,{children:"job_run"}),", ",(0,r.jsx)(n.code,{children:"auth"})]})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "logs": [\n    {\n      "id": 99,\n      "userId": "alice@example.com",\n      "action": "create",\n      "resource": "job",\n      "resourceId": 7,\n      "resourceName": "Daily Report Transfer",\n      "ipAddress": "10.0.0.1",\n      "details": { "schedule": "0 6 * * *", "status": "active" },\n      "timestamp": "2026-02-22T08:30:00.000Z"\n    }\n  ],\n  "total": 1,\n  "page": 1,\n  "limit": 50\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"backup",children:"Backup"}),"\n",(0,r.jsx)(n.h3,{id:"get-apibackuplist",children:(0,r.jsx)(n.code,{children:"GET /api/backup/list"})}),"\n",(0,r.jsx)(n.p,{children:"Returns a list of available backup files."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "filename": "filebridge-2026-02-22T02-00-00-000Z.db",\n    "path": "/app/data/backups/filebridge-2026-02-22T02-00-00-000Z.db",\n    "sizeBytes": 204800,\n    "createdAt": "2026-02-22T02:00:00.000Z"\n  }\n]\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"post-apibackuprun",children:(0,r.jsx)(n.code,{children:"POST /api/backup/run"})}),"\n",(0,r.jsx)(n.p,{children:"Triggers an immediate database backup."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "filename": "filebridge-2026-02-22T10-15-30-000Z.db",\n  "path": "/app/data/backups/filebridge-2026-02-22T10-15-30-000Z.db",\n  "sizeBytes": 204800,\n  "createdAt": "2026-02-22T10:15:30.000Z",\n  "integrity": "ok"\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"post-apibackuprestore",children:(0,r.jsx)(n.code,{children:"POST /api/backup/restore"})}),"\n",(0,r.jsx)(n.p,{children:"Restores the database from a backup file."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request Body"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{ "filename": "filebridge-2026-02-22T02-00-00-000Z.db" }\n'})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important"}),": A safety snapshot is created before the restore. The restore is performed using SQLite's ",(0,r.jsx)(n.code,{children:"ATTACH DATABASE"})," mechanism \u2014 no server restart is required. However, any in-flight requests during restore may see inconsistent data."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"health-check",children:"Health Check"}),"\n",(0,r.jsx)(n.h3,{id:"get-apihealth",children:(0,r.jsx)(n.code,{children:"GET /api/health"})}),"\n",(0,r.jsxs)(n.p,{children:["Public endpoint \u2014 ",(0,r.jsx)(n.strong,{children:"no authentication required"}),". Returns system health status for liveness/readiness probes."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response (200 OK)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "status": "ok",\n  "version": "0.1.0",\n  "uptime": 3600,\n  "checks": {\n    "database": { "status": "ok" },\n    "scheduler": { "status": "ok", "scheduledJobs": 6 }\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Response (503 Service Unavailable)"})," \u2014 when one or more checks fail:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "status": "degraded",\n  "version": "0.1.0",\n  "uptime": 3600,\n  "checks": {\n    "database": { "status": "error", "error": "SQLITE_IOERR" },\n    "scheduler": { "status": "ok", "scheduledJobs": 0 }\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"Health-Check",children:"Health Check"})," for Kubernetes probe configuration."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"error-responses",children:"Error Responses"}),"\n",(0,r.jsx)(n.p,{children:"All API routes return standard HTTP status codes:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Status"}),(0,r.jsx)(n.th,{children:"Meaning"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"200"})}),(0,r.jsx)(n.td,{children:"Success"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"201"})}),(0,r.jsx)(n.td,{children:"Created"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"400"})}),(0,r.jsx)(n.td,{children:"Bad request (invalid input)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"401"})}),(0,r.jsx)(n.td,{children:"Unauthorized (not signed in)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"404"})}),(0,r.jsx)(n.td,{children:"Not found"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"409"})}),(0,r.jsx)(n.td,{children:"Conflict (e.g. deleting a connection in use)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"500"})}),(0,r.jsx)(n.td,{children:"Internal server error"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"Error responses include a JSON body:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{ "error": "Human-readable error message" }\n'})})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453(e,n,s){s.d(n,{R:()=>c,x:()=>t});var i=s(6540);const r={},d=i.createContext(r);function c(e){const n=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(d.Provider,{value:n},e.children)}}}]);