"use strict";(self.webpackChunkfilebridge_docs=self.webpackChunkfilebridge_docs||[]).push([[512],{8152(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>a,frontMatter:()=>d,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"Connections","title":"Connections","description":"Connections define the credentials and endpoints for your storage systems. FileBridge currently supports three storage protocols, with more planned.","source":"@site/../docs/Connections.md","sourceDirName":".","slug":"/Connections","permalink":"/FileBridge/docs/Connections","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Authentication","permalink":"/FileBridge/docs/Authentication"},"next":{"title":"Jobs","permalink":"/FileBridge/docs/Jobs"}}');var r=s(4848),t=s(8453);const d={},l="Connections",c={},o=[{value:"Supported Protocols",id:"supported-protocols",level:2},{value:"Managing Connections",id:"managing-connections",level:2},{value:"SFTP Connections",id:"sftp-connections",level:2},{value:"Fields",id:"fields",level:3},{value:"Notes",id:"notes",level:3},{value:"SMB/CIFS Connections",id:"smbcifs-connections",level:2},{value:"Fields",id:"fields-1",level:3},{value:"NTLMv2 Authentication",id:"ntlmv2-authentication",level:3},{value:"SMB Reliability",id:"smb-reliability",level:3},{value:"Azure Blob Storage Connections",id:"azure-blob-storage-connections",level:2},{value:"Fields",id:"fields-2",level:3},{value:"Notes",id:"notes-1",level:3},{value:"Connection Testing",id:"connection-testing",level:2},{value:"Built-in File Browser",id:"built-in-file-browser",level:2},{value:"Security",id:"security",level:2},{value:"Referential Integrity",id:"referential-integrity",level:2}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"connections",children:"Connections"})}),"\n",(0,r.jsx)(n.p,{children:"Connections define the credentials and endpoints for your storage systems. FileBridge currently supports three storage protocols, with more planned."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"supported-protocols",children:"Supported Protocols"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Protocol"}),(0,r.jsx)(n.th,{children:"Use Case"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"SFTP"})}),(0,r.jsx)(n.td,{children:"Linux/Unix servers, NAS devices with SSH, cloud VMs"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"SMB/CIFS"})}),(0,r.jsx)(n.td,{children:"Windows file shares, NAS appliances (Synology, QNAP, etc.)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Azure Blob Storage"})}),(0,r.jsx)(n.td,{children:"Microsoft Azure cloud object storage"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"managing-connections",children:"Managing Connections"}),"\n",(0,r.jsxs)(n.p,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"Connections"})," in the sidebar. From here you can:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Create"})," a new connection with the ",(0,r.jsx)(n.strong,{children:"New Connection"})," button"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Edit"})," an existing connection \u2014 credentials are loaded securely (never exposed in list responses)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Test"})," a connection to verify reachability and auth before saving"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Delete"})," a connection \u2014 only possible if no jobs reference it (referential integrity enforced)"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"sftp-connections",children:"SFTP Connections"}),"\n",(0,r.jsx)(n.h3,{id:"fields",children:"Fields"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Name"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Display name for this connection"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Host"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Hostname or IP address of the SFTP server"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Port"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsxs)(n.td,{children:["Default: ",(0,r.jsx)(n.code,{children:"22"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Username"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"SSH username"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Authentication"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Password"})," or ",(0,r.jsx)(n.strong,{children:"Private Key"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Password"}),(0,r.jsx)(n.td,{children:"If password auth"}),(0,r.jsx)(n.td,{children:"SSH password"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Private Key"}),(0,r.jsx)(n.td,{children:"If key auth"}),(0,r.jsx)(n.td,{children:"PEM-formatted SSH private key (RSA, ECDSA, Ed25519)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Passphrase"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Passphrase for encrypted private keys"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Private keys are stored as JSON in the database. Treat the database file as sensitive."}),"\n",(0,r.jsx)(n.li,{children:"The connection test verifies SSH authentication and lists the root directory."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"smbcifs-connections",children:"SMB/CIFS Connections"}),"\n",(0,r.jsx)(n.h3,{id:"fields-1",children:"Fields"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Name"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Display name for this connection"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Host"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Hostname or IP of the Windows/SMB server"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Port"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsxs)(n.td,{children:["Default: ",(0,r.jsx)(n.code,{children:"445"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Share"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsxs)(n.td,{children:["SMB share name (e.g. ",(0,r.jsx)(n.code,{children:"files"}),", ",(0,r.jsx)(n.code,{children:"data"}),")"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Domain"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Windows domain name (for domain-joined accounts)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Username"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"SMB username"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Password"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"SMB password"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"ntlmv2-authentication",children:"NTLMv2 Authentication"}),"\n",(0,r.jsxs)(n.p,{children:["FileBridge uses the ",(0,r.jsx)(n.code,{children:"v9u-smb2"})," library, a fork with full NTLMv2 support. This enables compatibility with:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Windows Server file shares (2008 R2+)"}),"\n",(0,r.jsx)(n.li,{children:"Synology NAS (DSM 7+)"}),"\n",(0,r.jsx)(n.li,{children:"QNAP NAS"}),"\n",(0,r.jsx)(n.li,{children:"Other NTLMv2-enforcing SMB servers"}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note"}),": MD4 (used internally by NTLM) requires OpenSSL legacy mode. The ",(0,r.jsx)(n.code,{children:"npm"})," scripts set ",(0,r.jsx)(n.code,{children:"NODE_OPTIONS=--openssl-legacy-provider"})," automatically. In Docker, include ",(0,r.jsx)(n.code,{children:"ENV NODE_OPTIONS=--openssl-legacy-provider"})," in your Dockerfile."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"smb-reliability",children:"SMB Reliability"}),"\n",(0,r.jsx)(n.p,{children:"The SMB provider includes automatic retry logic to handle common transient errors:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"STATUS_FILE_CLOSED"})," \u2014 Reconnects and retries the operation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"STATUS_SHARING_VIOLATION"})," \u2014 Waits for the auto-close timeout and retries"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"STATUS_PENDING"})," \u2014 Backs off and retries"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"An auto-close timeout of 100ms is configured to release server FIDs (File IDs) promptly after each operation."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"azure-blob-storage-connections",children:"Azure Blob Storage Connections"}),"\n",(0,r.jsx)(n.h3,{id:"fields-2",children:"Fields"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Name"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Display name for this connection"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Storage Account"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Azure storage account name"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Container"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Blob container name (analogous to an SMB share)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Authentication"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Account Key"})," or ",(0,r.jsx)(n.strong,{children:"Connection String"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Account Key"}),(0,r.jsx)(n.td,{children:"If key auth"}),(0,r.jsx)(n.td,{children:"Azure storage account key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Connection String"}),(0,r.jsx)(n.td,{children:"If conn string auth"}),(0,r.jsx)(n.td,{children:"Full Azure storage connection string"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"notes-1",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Access is scoped to a single container \u2014 you cannot reference blobs across containers in a single connection"}),"\n",(0,r.jsxs)(n.li,{children:["For move operations, FileBridge uses server-side copy (",(0,r.jsx)(n.code,{children:"BlobClient.beginCopyFromURL"}),") to avoid egress costs"]}),"\n",(0,r.jsx)(n.li,{children:"The host and port fields are not used for Azure Blob connections (the endpoint is derived from the account name)"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"connection-testing",children:"Connection Testing"}),"\n",(0,r.jsxs)(n.p,{children:["Every connection has a ",(0,r.jsx)(n.strong,{children:"Test Connection"})," button available:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["In the ",(0,r.jsx)(n.strong,{children:"connection form"})," (before saving) \u2014 tests the form values directly via ",(0,r.jsx)(n.code,{children:"POST /api/connections/test"})]}),"\n",(0,r.jsxs)(n.li,{children:["In the ",(0,r.jsx)(n.strong,{children:"connection list"})," \u2014 tests an already-saved connection via ",(0,r.jsx)(n.code,{children:"POST /api/connections/[id]/test"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The test verifies:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Network reachability (TCP connect to host",":port",")"]}),"\n",(0,r.jsx)(n.li,{children:"Authentication (valid credentials)"}),"\n",(0,r.jsx)(n.li,{children:"Path access (can list the root/share)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"A detailed success or failure message is shown in the UI."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"built-in-file-browser",children:"Built-in File Browser"}),"\n",(0,r.jsx)(n.p,{children:"When creating or editing a job, you can browse the remote filesystem directly from the UI without leaving FileBridge:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Click the folder icon next to the ",(0,r.jsx)(n.strong,{children:"Source Path"})," or ",(0,r.jsx)(n.strong,{children:"Destination Path"})," field"]}),"\n",(0,r.jsx)(n.li,{children:"Navigate directories using the point-and-click browser"}),"\n",(0,r.jsx)(n.li,{children:"Select a folder to populate the path field"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["The file browser uses ",(0,r.jsx)(n.code,{children:"GET /api/connections/[id]/browse?path=/some/path"})," under the hood."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"security",children:"Security"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Connection credentials are stored as JSON in the SQLite ",(0,r.jsx)(n.code,{children:"connections.credentials"})," column"]}),"\n",(0,r.jsxs)(n.li,{children:["API responses ",(0,r.jsx)(n.strong,{children:"never"})," return the ",(0,r.jsx)(n.code,{children:"credentials"})," field \u2014 the connection list returns only ",(0,r.jsx)(n.code,{children:"username"})," for display"]}),"\n",(0,r.jsxs)(n.li,{children:["The edit form fetches full connection data via ",(0,r.jsx)(n.code,{children:"GET /api/connections/[id]"})," (authenticated endpoint) \u2014 only the server ever has full credentials"]}),"\n",(0,r.jsxs)(n.li,{children:["All credential fields are redacted (",(0,r.jsx)(n.code,{children:"[REDACTED]"}),") from structured log output"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Planned"}),": Field-level encryption for credentials at rest using libsodium. See ",(0,r.jsx)(n.a,{href:"Security",children:"Security"})," and ",(0,r.jsx)(n.a,{href:"Roadmap",children:"Roadmap"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"referential-integrity",children:"Referential Integrity"}),"\n",(0,r.jsx)(n.p,{children:"A connection cannot be deleted if any job references it as its source or destination. The delete API returns an error listing the affected jobs. Update or delete those jobs first."})]})}function a(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453(e,n,s){s.d(n,{R:()=>d,x:()=>l});var i=s(6540);const r={},t=i.createContext(r);function d(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);