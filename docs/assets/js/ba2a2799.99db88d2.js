"use strict";(self.webpackChunkfilebridge_docs=self.webpackChunkfilebridge_docs||[]).push([[904],{1430(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>o,frontMatter:()=>d,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"Configuration","title":"Configuration","description":"FileBridge is configured through a small set of environment variables. SSO providers, users, and most application settings are managed through the admin UI rather than environment variables.","source":"@site/../docs/Configuration.md","sourceDirName":".","slug":"/Configuration","permalink":"/FileBridge/docs/Configuration","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Docker Deployment","permalink":"/FileBridge/docs/Docker-Deployment"},"next":{"title":"Authentication","permalink":"/FileBridge/docs/Authentication"}}');var s=t(4848),r=t(8453);const d={},l="Configuration",c={},a=[{value:"Environment Variables",id:"environment-variables",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Database",id:"database",level:3},{value:"Logging",id:"logging",level:3},{value:"Runtime",id:"runtime",level:3},{value:"Install Metadata",id:"install-metadata",level:3},{value:"Startup Validation",id:"startup-validation",level:2},{value:"Example .env Files",id:"example-env-files",level:2},{value:"Local Development (Dev Bypass)",id:"local-development-dev-bypass",level:3},{value:"Local Development (With Local Auth)",id:"local-development-with-local-auth",level:3},{value:"Production",id:"production",level:3},{value:"Application Settings (In-App)",id:"application-settings-in-app",level:2},{value:"User Management",id:"user-management",level:3},{value:"SSO Configuration",id:"sso-configuration",level:3},{value:"Notification Settings",id:"notification-settings",level:3},{value:"Timezone Settings",id:"timezone-settings",level:3},{value:"About &amp; Updates",id:"about--updates",level:3},{value:"Backup Settings",id:"backup-settings",level:3}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"configuration",children:"Configuration"})}),"\n",(0,s.jsx)(n.p,{children:"FileBridge is configured through a small set of environment variables. SSO providers, users, and most application settings are managed through the admin UI rather than environment variables."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,s.jsx)(n.h3,{id:"authentication",children:"Authentication"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Variable"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"AUTH_SECRET"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yes"})}),(0,s.jsxs)(n.td,{children:["NextAuth secret key. Generate with ",(0,s.jsx)(n.code,{children:"openssl rand -base64 32"}),". Also used to encrypt SSO client secrets at rest."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"NEXTAUTH_URL"})}),(0,s.jsx)(n.td,{children:"Yes (prod)"}),(0,s.jsxs)(n.td,{children:["Full URL where the app is hosted (e.g. ",(0,s.jsx)(n.code,{children:"https://filebridge.example.com"}),"). Required in production."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"AUTH_BYPASS_DEV"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsxs)(n.td,{children:["Set to ",(0,s.jsx)(n.code,{children:"true"})," to skip authentication in local development. ",(0,s.jsx)(n.strong,{children:"Never use in production."})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"NEXT_PUBLIC_AUTH_BYPASS_DEV"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsxs)(n.td,{children:["Client-side companion to ",(0,s.jsx)(n.code,{children:"AUTH_BYPASS_DEV"}),". Must match."]})]})]})]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),": SSO provider credentials (Azure AD Client ID/Secret, GitHub Client ID/Secret) are configured via the ",(0,s.jsx)(n.strong,{children:"Admin \u2192 Authentication"})," UI and stored encrypted in the database. No SSO-related environment variables are needed."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"database",children:"Database"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Variable"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"DATABASE_PATH"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"./data/filebridge.db"})}),(0,s.jsx)(n.td,{children:"Absolute or relative path to the SQLite database file. The directory is created automatically."})]})})]}),"\n",(0,s.jsx)(n.h3,{id:"logging",children:"Logging"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Variable"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"LOG_LEVEL"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"info"})}),(0,s.jsxs)(n.td,{children:["Pino log level: ",(0,s.jsx)(n.code,{children:"trace"}),", ",(0,s.jsx)(n.code,{children:"debug"}),", ",(0,s.jsx)(n.code,{children:"info"}),", ",(0,s.jsx)(n.code,{children:"warn"}),", ",(0,s.jsx)(n.code,{children:"error"}),", ",(0,s.jsx)(n.code,{children:"fatal"})]})]})})]}),"\n",(0,s.jsx)(n.h3,{id:"runtime",children:"Runtime"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Variable"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"NODE_OPTIONS"})}),(0,s.jsx)(n.td,{children:"Auto"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsxs)(n.td,{children:["Set to ",(0,s.jsx)(n.code,{children:"--openssl-legacy-provider"})," for SMB NTLMv2 support. The npm scripts handle this automatically."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"NODE_ENV"})}),(0,s.jsx)(n.td,{children:"Auto"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsxs)(n.td,{children:["Set by Next.js. Values: ",(0,s.jsx)(n.code,{children:"development"}),", ",(0,s.jsx)(n.code,{children:"production"}),", ",(0,s.jsx)(n.code,{children:"test"}),"."]})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"install-metadata",children:"Install Metadata"}),"\n",(0,s.jsx)(n.p,{children:"These variables are written automatically by the install scripts and are used by the built-in updater and the Settings \u2192 About page. You do not need to set them manually."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Variable"}),(0,s.jsx)(n.th,{children:"Set by"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"FILEBRIDGE_INSTALL_TYPE"})}),(0,s.jsx)(n.td,{children:"Installer / Dockerfile"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"native"})," (install script), ",(0,s.jsx)(n.code,{children:"docker"})," (container), or ",(0,s.jsx)(n.code,{children:"manual"})," (from source). Controls whether the in-app updater is shown."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"FILEBRIDGE_OS"})}),(0,s.jsx)(n.td,{children:"Installer"}),(0,s.jsxs)(n.td,{children:["Operating system: ",(0,s.jsx)(n.code,{children:"linux"}),", ",(0,s.jsx)(n.code,{children:"darwin"}),", or ",(0,s.jsx)(n.code,{children:"windows"}),"."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"FILEBRIDGE_ARCH"})}),(0,s.jsx)(n.td,{children:"Installer"}),(0,s.jsxs)(n.td,{children:["Platform + architecture string used to select the correct release artifact (e.g. ",(0,s.jsx)(n.code,{children:"linux-amd64"}),", ",(0,s.jsx)(n.code,{children:"darwin-arm64"}),", ",(0,s.jsx)(n.code,{children:"windows-amd64"}),")."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"FILEBRIDGE_INSTALL_DIR"})}),(0,s.jsx)(n.td,{children:"Installer"}),(0,s.jsxs)(n.td,{children:["Absolute path to the application directory (e.g. ",(0,s.jsx)(n.code,{children:"/opt/filebridge"}),"). Used by the updater to locate the app files."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"FILEBRIDGE_DATA_DIR"})}),(0,s.jsx)(n.td,{children:"Installer"}),(0,s.jsxs)(n.td,{children:["Absolute path to the data directory (e.g. ",(0,s.jsx)(n.code,{children:"/var/lib/filebridge"}),"). Used by the updater to write the update trigger file."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"FILEBRIDGE_SERVICE_NAME"})}),(0,s.jsx)(n.td,{children:"Installer"}),(0,s.jsxs)(n.td,{children:["Service name registered with the OS service manager (e.g. ",(0,s.jsx)(n.code,{children:"filebridge"}),", ",(0,s.jsx)(n.code,{children:"FileBridge"}),")."]})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"startup-validation",children:"Startup Validation"}),"\n",(0,s.jsxs)(n.p,{children:["FileBridge uses a Zod schema (",(0,s.jsx)(n.code,{children:"lib/env.ts"}),") to validate environment variables at startup. The only mandatory variable is ",(0,s.jsx)(n.code,{children:"AUTH_SECRET"}),". If validation fails, the process exits with a non-zero status and logs the specific missing or invalid variables:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"ERROR [env] Invalid environment configuration \u2014 server cannot start\n  - AUTH_SECRET: AUTH_SECRET is required\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"example-env-files",children:"Example .env Files"}),"\n",(0,s.jsx)(n.h3,{id:"local-development-dev-bypass",children:"Local Development (Dev Bypass)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-env",children:"AUTH_BYPASS_DEV=true\nNEXT_PUBLIC_AUTH_BYPASS_DEV=true\nAUTH_SECRET=dev-only-secret-not-for-production\nNEXTAUTH_URL=http://localhost:3000\nLOG_LEVEL=debug\n"})}),"\n",(0,s.jsx)(n.h3,{id:"local-development-with-local-auth",children:"Local Development (With Local Auth)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-env",children:"AUTH_SECRET=<openssl rand -base64 32>\nNEXTAUTH_URL=http://localhost:3000\n"})}),"\n",(0,s.jsx)(n.p,{children:"On first launch, the setup wizard will create your admin account. No additional configuration needed."}),"\n",(0,s.jsx)(n.h3,{id:"production",children:"Production"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-env",children:"AUTH_SECRET=<openssl rand -base64 32>\nNEXTAUTH_URL=https://filebridge.example.com\n\nDATABASE_PATH=/app/data/filebridge.db\nLOG_LEVEL=info\n"})}),"\n",(0,s.jsxs)(n.p,{children:["SSO providers are configured via the admin UI after setup. See ",(0,s.jsx)(n.a,{href:"Authentication",children:"Authentication"})," for details."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"application-settings-in-app",children:"Application Settings (In-App)"}),"\n",(0,s.jsx)(n.p,{children:"Most settings are stored in the database and configured through the web UI:"}),"\n",(0,s.jsx)(n.h3,{id:"user-management",children:"User Management"}),"\n",(0,s.jsxs)(n.p,{children:["Configured at ",(0,s.jsx)(n.strong,{children:"Admin \u2192 Users"}),":"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Setting"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"User accounts"}),(0,s.jsx)(n.td,{children:"Create, edit, deactivate, and delete local and SSO user accounts"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Roles"}),(0,s.jsx)(n.td,{children:"Assign Administrator or Viewer roles"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"sso-configuration",children:"SSO Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Configured at ",(0,s.jsx)(n.strong,{children:"Admin \u2192 Authentication"}),":"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Setting"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Azure AD"}),(0,s.jsx)(n.td,{children:"Client ID, Client Secret, Tenant ID"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"GitHub"}),(0,s.jsx)(n.td,{children:"Client ID, Client Secret"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Enable/Disable"}),(0,s.jsx)(n.td,{children:"Toggle individual providers on the login page"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"notification-settings",children:"Notification Settings"}),"\n",(0,s.jsxs)(n.p,{children:["Configured at ",(0,s.jsx)(n.strong,{children:"Settings \u2192 Notifications"}),":"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Setting"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"SMTP host / port / user / password / from / to"}),(0,s.jsx)(n.td,{children:"Email alert delivery via SMTP"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Teams webhook URL"}),(0,s.jsx)(n.td,{children:"Microsoft Teams channel alert integration"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Alert on failure"}),(0,s.jsx)(n.td,{children:"Trigger notification when a job fails"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Alert after N consecutive errors"}),(0,s.jsx)(n.td,{children:"Escalation threshold"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"timezone-settings",children:"Timezone Settings"}),"\n",(0,s.jsxs)(n.p,{children:["Configured at ",(0,s.jsx)(n.strong,{children:"Settings \u2192 Timezone"}),":"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Setting"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Timezone"}),(0,s.jsxs)(n.td,{children:["IANA timezone identifier used for all cron job scheduling (e.g. ",(0,s.jsx)(n.code,{children:"America/New_York"}),", ",(0,s.jsx)(n.code,{children:"Europe/London"}),", ",(0,s.jsx)(n.code,{children:"UTC"}),")"]})]})})]}),"\n",(0,s.jsxs)(n.p,{children:["Defaults to ",(0,s.jsx)(n.code,{children:"UTC"})," if not configured. Changing the timezone immediately reschedules all active jobs. Invalid IANA identifiers are rejected with a validation error."]}),"\n",(0,s.jsx)(n.h3,{id:"about--updates",children:"About & Updates"}),"\n",(0,s.jsxs)(n.p,{children:["Configured at ",(0,s.jsx)(n.strong,{children:"Settings \u2192 About"}),":"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Setting"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Current / latest version"}),(0,s.jsx)(n.td,{children:"Displays the running version and checks GitHub for the latest release"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Install type"}),(0,s.jsx)(n.td,{children:"Shows whether FileBridge is running as a native install, Docker container, or manual/dev install"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Update Now"}),(0,s.jsx)(n.td,{children:"Admin-only button (native installs only) \u2014 downloads and applies the latest release with ~30 seconds of downtime"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Manual upgrade commands"}),(0,s.jsx)(n.td,{children:"Copy-ready upgrade commands shown for native (Linux/macOS/Windows) and Docker installs"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"backup-settings",children:"Backup Settings"}),"\n",(0,s.jsxs)(n.p,{children:["Configured at ",(0,s.jsx)(n.strong,{children:"Settings \u2192 Database Backups"}),":"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Setting"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Enable scheduled backups"}),(0,s.jsx)(n.td,{children:"Toggle automatic backups on/off"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Cron schedule"}),(0,s.jsxs)(n.td,{children:["When to run backups (default: ",(0,s.jsx)(n.code,{children:"0 2 * * *"})," \u2014 2:00 AM daily)"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Local backup path"}),(0,s.jsxs)(n.td,{children:["Directory where backup ",(0,s.jsx)(n.code,{children:".db"})," files are stored"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Retention count"}),(0,s.jsx)(n.td,{children:"How many backups to keep (default: 7)"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"Database-Backups",children:"Database Backups"})," for full details."]})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453(e,n,t){t.d(n,{R:()=>d,x:()=>l});var i=t(6540);const s={},r=i.createContext(s);function d(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);